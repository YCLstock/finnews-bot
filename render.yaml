# Render éƒ¨ç½²é…ç½®æ–‡ä»¶
# FinNews-Bot 2.0 - æ™ºèƒ½è²¡ç¶“æ–°èæ¨é€ç³»çµ±

services:
  # ğŸš€ FastAPI å¾Œç«¯æœå‹™
  - type: web
    name: finnews-bot-api
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn api.main:app --host 0.0.0.0 --port $PORT --workers 2
    plan: starter  # æˆ– standard
    region: singapore  # é¸æ“‡æœ€è¿‘çš„å€åŸŸ
    branch: main
    healthCheckPath: /api/v1/health
    envVars:
      - key: PYTHON_VERSION
        value: 3.9.18
      - key: SUPABASE_URL
        sync: false  # éœ€è¦åœ¨ Render Dashboard ä¸­æ‰‹å‹•è¨­ç½®
      - key: SUPABASE_SERVICE_KEY
        sync: false  # éœ€è¦åœ¨ Render Dashboard ä¸­æ‰‹å‹•è¨­ç½®
      - key: SUPABASE_JWT_SECRET
        sync: false  # éœ€è¦åœ¨ Render Dashboard ä¸­æ‰‹å‹•è¨­ç½®
      - key: OPENAI_API_KEY
        sync: false  # éœ€è¦åœ¨ Render Dashboard ä¸­æ‰‹å‹•è¨­ç½®
      - key: YAHOO_FINANCE_URL
        value: https://finance.yahoo.com/topic/stock-market-news
      - key: SCRAPER_TIMEOUT
        value: 30
      - key: API_HOST
        value: 0.0.0.0
      - key: API_PORT
        value: $PORT
    autoDeploy: true

# ğŸ“ éƒ¨ç½²èªªæ˜:
# 1. å°‡æ­¤æ–‡ä»¶æ”¾åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„
# 2. åœ¨ Render Dashboard ä¸­é€£æ¥ GitHub å°ˆæ¡ˆ
# 3. æ‰‹å‹•è¨­ç½®æ©Ÿå¯†ç’°å¢ƒè®Šæ•¸ (SUPABASE_*, OPENAI_API_KEY)
# 4. å®šæœŸçˆ¬èŸ²ä»»å‹™ç”± GitHub Actions è™•ç†
# 
# ğŸ• æ¨é€é‚è¼¯:
# - GitHub Actions æ¯ 10 åˆ†é˜æª¢æŸ¥ä¸€æ¬¡æ˜¯å¦æœ‰ç¬¦åˆæ¨é€æ¢ä»¶çš„è¨‚é–±
# - åªåœ¨ 08:00, 13:00, 20:00 (Â±30åˆ†é˜) æ™‚é–“çª—å£å…§æ¨é€
# - è‡ªå‹•é˜²é‡è¤‡æ¨é€ï¼ŒåŒä¸€æ™‚é–“çª—å£åªæ¨é€ä¸€æ¬¡ 